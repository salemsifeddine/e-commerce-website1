{% extends "pages/base.html" %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css\search.css' %}">
{% endblock css %}

{% block content %}


<div  class="products-search">
    <div class="searchtitle">
        <p>Category : "{{query}}"</p> 
    </div>
    {% for product in products %}
                    
    <div xmlns:v="https://www.w3.org/1999/xhtml/" about="product.get_absolute_url" typeof="v:Product"  class="product-search">
                                
        <a href="{% url 'detail'  product.id %}">
            {% if product.is_promotion %}
        <div id="promo{{product.id}}" class="promotion">
            <script>
                var val=0
                var newpricepromo= "{{product.new_price}}"
                var oldpricepromo= "{{product.old_price}}"
                var promotion=(parseInt(newpricepromo) / parseInt(oldpricepromo))*100
                if(promotion.toString().split('').length >= 2){
                    val= promotion.toString().split('').slice(0,2).join('')
                }

                document.getElementById("promo{{product.id}}").textContent =val + "%"
            </script>
        </div>
        {% endif %}
        <div class="productImg">
            <img class="skeleton" src="{{product.image.url}}" alt="">
        </div>
        </a>
        
        <div class="productDescription">
            <div property="v:name" class="productName skeleton-text">
                <h5>{{product.name|lower}}</h5>
            </div>
            <div class="productPrice">
                <div class="through skeleton-text">
                    {% if product.old_price == 0 %}
                        <p>Free</p>
                    {% else %}
                        <p>{{product.old_price}}0$</p>
                    {% endif %}
                </div>
                <div  property="v:price" class="realPrice skeleton-text">
                    {% if product.new_price == 0 %}
                    <h5>Free</h5>
                    {% else %}
                        <h5>{{product.new_price}}0$</h5>
                    {% endif %}
                    
                </div>
            </div>
            <div  property="v:rate" class="rate">

                {% if product.rate.rate == 0 %}
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 0.5 %}
                <i class="fas fa-star-half-alt"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 1 %}
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 1.5 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 2 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 2.5 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 3 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 3.5 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 4 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 4.5 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 5 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                {% elif product.rate.rate == 5.5 %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                {% else %}
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
            {% endif %}
            </div>
            <div class="btns">
                <button data-product='{{product.id}}' data-action='add'  class=" addToCart">Add to cart</button>
                
            </div>
            </div>
        
        
    </div>
                
            {% endfor %}
</div>
{% endblock content %}